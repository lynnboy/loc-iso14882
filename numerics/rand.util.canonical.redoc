[/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% generate_canonical function template:
/]

[section#rand.util.canonical
    [:en] Function template [`generate_canonical]
    [:zh_CN] 函数模板 [`generate_canonical]
]

[%@lib generate_canonical]

[para]
[:en] Each function instantiated from the template described in this subclause
[#rand.util.canonical] maps the result of one or more invocations of a supplied
uniform random bit generator [`g] to one member of the specified [`RealType]
such that, if the values [$g_i] produced by [`g] are uniformly distributed,
the instantiation[=']s results [$t_j], [$0 \leq t_j < 1], are distributed
as uniformly as possible as specified below.
[:zh_CN] 本子条款 [#rand.util.canonical] 中所述的各模板所实例化而得的各个函数，
将所提供的均匀随机位生成器 [`g] 的一次或多次调用的结果，映射到所指定的
[`RealType] 的某个成员，使得当 [`g] 所产生的值 [$g_i] 均匀分布时，该实例的结果
[$t_j]，[$0 \leq t_j < 1]按如下所述尽可能均匀分布。

[para]
[begin:note]
[:en] Obtaining a value in this way can be a useful step in the process of
transforming a value generated by a uniform random bit generator into a value
that can be delivered by a random number distribution.
[:zh_CN] 以这种方式获得一个值，可以作为将某个均匀随机位生成器所产生的值变换为
可由某个随机数分布所交付的值的处理过程的一个步骤。
[end:note]

[%@lib generate_canonical]
[codeblock:declaration]
template<class RealType, size_t bits, class URNG>
 RealType generate_canonical(URNG& g);
[codeblock:end]

[div:description]
[para:complexity]
[:en] Exactly [$k = \max(1, \left\lceil b / \log_2 R \right\rceil)] invocations
of [`g], where [$b][#:note#fn:$1] is the lesser of
[`numeric_limits<RealType>::digits] and [`bits], and [$R] is the value of
[$[`g.max()] - [`g.min()] + 1].
[:zh_CN] 恰好 [$k = \max(1, \left\lceil b / \log_2 R \right\rceil)] 次对 [`g] 的
调用，其中 [$b][#:note#fn:$1] 为 [`numeric_limits<RealType>::digits] 和 [`bits]
中的较小值，而 [$R] 值为 [$[`g.max()] - [`g.min()] + 1]。

[note:foot#fn:$1]
[:en] [$b] is introduced to avoid any attempt to produce more bits of randomness
than can be held in [`RealType].
[:zh_CN] [$b] 的引入是为了防止产生比 [`RealType] 所能持有的随机性更多的位的可能。
[note:end]

[para:effects]
[:en] Invokes [`g()] [$k] times to obtain values [$g_0, \dotsc, g_{k-1}],
respectively.
[:zh_CN] [$k] 次调用 [`g()] 以分别获得值 [$g_0, \dotsc, g_{k-1}]。

[:en] Calculates a quantity
[:zh_CN] 利用 [`RealType] 类型的算术计算

[math]
   S = \sum_{i=0}^{k-1} (g_i - [`g.min()])
                        \cdot R^i
[math:end]

[:en@~] using arithmetic of type [`RealType].
[:zh_CN@~]。

[para:returns]
[:en] [$S / R^k].
[:zh_CN] [$S / R^k]。

[para:throws]
[:en] What and when [`g] throws.
[:zh_CN] 当 [`g] 抛出异常时抛出其所抛出的异常。
[div:end]
