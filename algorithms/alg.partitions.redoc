[section#alg.partitions
    [:en] Partitions
    [:zh_CN] 分区
]

[%@library is_partitioned]
[codeblock:declaration]
template<class InputIterator, class Predicate>
  constexpr bool is_partitioned(InputIterator first, InputIterator last, Predicate pred);
template<class ExecutionPolicy, class ForwardIterator, class Predicate>
  bool is_partitioned(ExecutionPolicy&& exec,
                      ForwardIterator first, ForwardIterator last, Predicate pred);
[codeblock:end]

[enter:description]
[para:requires]
[:en] For the overload with no [`ExecutionPolicy], [`InputIterator][=']s value
type shall be convertible to [`Predicate][=']s argument type.
[:zh_CN] 对于不带有 [`ExecutionPolicy] 的重载，[`InputIterator] 的值类型应当可以
转换为 [`Predicate] 的实参类型。

[:en] For the overload with an [`ExecutionPolicy], [`ForwardIterator][=']s value
type shall be convertible to [`Predicate][=']s argument type.
[:zh_CN] 对于带有 [`ExecutionPolicy] 的重载，[`ForwardIterator] 的值类型应当可以
转换为 [`Predicate] 的实参类型。

[para:returns]
[:en] [`true] if [=range(first,last)] is empty or if the elements [`e] of
[=range(first,last)] are partitioned with respect to the expression [`pred(e)].
[:zh_CN] 如果 [=range(first,last)] 为空，或者如果 [=range(first,last)] 中的元素
[`e] 根据表达式 [`pred(e)] 进行了分区，则返回 [`true]。

[para:complexity]
[:en] Linear.
[:zh_CN] 线性。

[:en] At most [`last - first] applications of [`pred].
[:zh_CN] 最多进行 [`last - first] 次 [`pred] 的运用。
[exit:description]

[%@library partition]
[codeblock:declaration]
template<class ForwardIterator, class Predicate>
  ForwardIterator
    partition(ForwardIterator first, ForwardIterator last, Predicate pred);
template<class ExecutionPolicy, class ForwardIterator, class Predicate>
  ForwardIterator
    partition(ExecutionPolicy&& exec,
              ForwardIterator first, ForwardIterator last, Predicate pred);
[codeblock:end]

[enter:description]
[para:requires]
[:en] [`ForwardIterator] shall satisfy the [`ValueSwappable] requirements
([#swappable.requirements]).
[:zh_CN] [`ForwardIterator] 应当符合 [`ValueSwappable] 的规定
（[#swappable.requirements]）。

[para:effects]
[:en] Places all the elements in the range [=range(first,last)] that satisfy
[`pred] before all the elements that do not satisfy it.
[:zh_CN] 将范围 [=range(first,last)] 中的所有符合 [`pred] 的元素置于所有不符合
的元素之前。

[para:returns]
[:en] An iterator [`i] such that for every iterator [`j] in the range
[=range(first,i)] [`pred(*j) != false], and for every iterator [`k] in the
range [=range(i,last)], [`pred(*k) == false].
[:zh_CN] 迭代器 [`i]，使得对于范围 [=range(first,i)] 中的每个迭代器 [`j] 均有
[`pred(*j) != false]，而对于范围 [=range(i,last)] 中的每个迭代器 [`k] 均有
[`pred(*k) == false]。

[para:complexity]
[:en] Let [$N = [`last - first]]:
[:zh_CN] 令 [$N = [`last - first]]：

[list]
[item]
[:en] For the overload with no [`ExecutionPolicy], exactly [$N] applications of
the predicate.
[:zh_CN] 对于不带有 [`ExecutionPolicy] 的重载，恰好进行 [$N] 次谓词的运用。

[:en] At most [$N / 2] swaps if [`ForwardIterator] meets the
[`BidirectionalIterator] requirements and at most [$N] swaps otherwise.
[:zh_CN] 当 [`ForwardIterator] 满足 [`BidirectionalIterator] 的规定时，最多进行
[$N / 2] 次交换；否则最多进行 [$N] 次交换。

[item]
[:en] For the overload with an [`ExecutionPolicy], [$[=O](N \log N)] swaps and
[$[=O](N)] applications of the predicate.
[:zh_CN] 对于带有 [`ExecutionPolicy] 的重载，[$[=O](N \log N)] 次交换和
[$[=O](N)] 次谓词的运用。
[list:end]
[exit:description]

[%@library stable_partition]
[codeblock:declaration]
template<class BidirectionalIterator, class Predicate>
  BidirectionalIterator
    stable_partition(BidirectionalIterator first, BidirectionalIterator last, Predicate pred);
template<class ExecutionPolicy, class BidirectionalIterator, class Predicate>
  BidirectionalIterator
    stable_partition(ExecutionPolicy&& exec,
                     BidirectionalIterator first, BidirectionalIterator last, Predicate pred);
[codeblock:end]

[enter:description]
[para:requires]
[:en] [`BidirectionalIterator] shall satisfy the [`ValueSwappable] requirements
([#swappable.requirements]).
[:zh_CN] [`BidirectionalIterator] 应当符合 [`ValueSwappable] 的规定
（[#swappable.requirements]）。

[:en] The type of [`*first] shall satisfy the [`MoveConstructible]
([#moveconstructible]) and [`MoveAssignable] ([#moveassignable]) requirements.
[:zh_CN] [`*first] 的类型应当符合 [`MoveConstructible]（[#moveconstructible]）和
[`MoveAssignable]（[#moveassignable]）的规定。

[para:effects]
[:en] Places all the elements in the range [=range(first,last)] that satisfy
[`pred] before all the elements that do not satisfy it.
[:zh_CN] 将范围 [=range(first,last)] 中的所有符合 [`pred] 的元素置于所有不符合
的元素之前。

[para:returns]
[:en] An iterator [`i] such that for every iterator [`j] in the range
[=range(first,i)], [`pred(*j) != false], and for every iterator [`k] in the
range [=range(i,last)], [`pred(*k) == false].
[:zh_CN] 迭代器 [`i]，使得对于范围 [=range(first,i)] 中的每个迭代器 [`j] 均有
[`pred(*j) != false]，而对于范围 [=range(i,last)] 中的每个迭代器 [`k] 均有
[`pred(*k) == false]。

[:en] The relative order of the elements in both groups is preserved.
[:zh_CN] 两个组中，元素之间的相对顺序均被保留。

[para:complexity]
[:en] Let [$N] = [`last - first]:
[:zh_CN] 令 [$N] = [`last - first]：

[list]
[item]
[:en] For the overload with no [`ExecutionPolicy], at most [$N \log N] swaps,
but only [$[=O](N)] swaps if there is enough extra memory.
[:zh_CN] 对于不带有 [`ExecutionPolicy] 的重载，最多进行 [$N \log N] 次交换，但当
有足够的额外内存时仅进行 [$[=O](N)] 次交换。

[:en] Exactly [$N] applications of the predicate.
[:zh_CN] 恰好进行 [$N] 次谓词的运用。

[item]
[:en] For the overload with an [`ExecutionPolicy], [$[=O](N \log N)] swap and
[$[=O](N)] applications of the predicate.
[:zh_CN] 对于带有 [`ExecutionPolicy] 的重载，进行 [$[=O](N \log N)] 次交换和
[$[=O](N)] 次谓词的运用。
[list:end]
[exit:description]

[%@library partition_copy]
[codeblock:declaration]
template<class InputIterator, class OutputIterator1,
         class OutputIterator2, class Predicate>
  constexpr pair<OutputIterator1, OutputIterator2>
    partition_copy(InputIterator first, InputIterator last,
                   OutputIterator1 out_true, OutputIterator2 out_false, Predicate pred);
template<class ExecutionPolicy, class ForwardIterator, class ForwardIterator1,
         class ForwardIterator2, class Predicate>
  pair<ForwardIterator1, ForwardIterator2>
    partition_copy(ExecutionPolicy&& exec,
                   ForwardIterator first, ForwardIterator last,
                   ForwardIterator1 out_true, ForwardIterator2 out_false, Predicate pred);
[codeblock:end]

[enter:description]
[para:requires]

[list]
[item]
[:en] For the overload with no [`ExecutionPolicy], [`InputIterator][=']s value
type shall be [`CopyAssignable] ([#copyassignable]), and shall be writable
([#iterator.requirements.general]) to the [`out_true] and [`out_false]
[`OutputIterator]s, and shall be convertible to [`Predicate][=']s argument type.
[:zh_CN] 对于不带有 [`ExecutionPolicy] 的重载，[`InputIterator] 的值类型应当为
[`CopyAssignable]（[#copyassignable]），并且应当可以向 [`OutputIterator]
[`out_true] 和 [`out_false] 写出（[#iterator.requirements.general]），并且应当
可以转换为 [`Predicate] 的实参类型。

[item]
[:en] For the overload with an [`ExecutionPolicy], [`ForwardIterator][=']s value
type shall be [`CopyAssignable], and shall be writable to the [`out_true] and
[`out_false] [`ForwardIterator]s, and shall be convertible to [`Predicate][=']s
argument type.
[:zh_CN] 对于带有 [`ExecutionPolicy] 的重载，[`ForwardIterator] 的值类型应当为
[`CopyAssignable]，并且应当可以向 [`ForwardIterator] [`out_true] 和 [`out_false]
写出，并且应当可以转换为 [`Predicate] 的实参类型。

[enter:note]
[:en] There may be a performance cost if [`ForwardIterator][=']s value type is
not [`CopyConstructible].
[:zh_CN] 当 [`ForwardIterator] 的值类型不为 [`CopyConstructible] 时，可能存在
性能损耗。
[exit:note]

[item]
[:en] For both overloads, the input range shall not overlap with either of the
output ranges.
[:zh_CN] 两种重载中，输入范围均不能与任何一个输出范围有重叠。
[list:end]

[para:effects]
[:en] For each iterator [`i] in [=range(first,last)], copies [`*i] to the output
range beginning with [`out_true] if [`pred(*i)] is [`true], or to the output
range beginning with [`out_false] otherwise.
[:zh_CN] 对于范围 [=range(first,last)] 中的每个迭代器 [`i]，如果 [`pred(*i)] 为
[`true]，则将 [`*i] 复制到以 [`out_true] 开始的输出范围，否则就将其复制到以
[`out_false] 开始的输出范围。

[para:returns]
[:en] A pair [`p] such that [`p.first] is the end of the output range beginning
at [`out_true] and [`p.second] is the end of the output range beginning at
[`out_false].
[:zh_CN] 对偶 [`p]，其中 [`p.first] 为以 [`out_true] 开始的输出范围的末尾，而
[`p.second] 为以 [`out_false] 开始的输出范围的末尾。

[para:complexity]
[:en] Exactly [`last - first] applications of [`pred].
[:zh_CN] 恰好进行 [`last - first] 次 [`pred] 的运用。
[exit:description]

[%@library partition_point]
[codeblock:declaration]
template<class ForwardIterator, class Predicate>
  constexpr ForwardIterator
    partition_point(ForwardIterator first, ForwardIterator last, Predicate pred);
[codeblock:end]

[enter:description]
[para:requires]
[:en] [`ForwardIterator][=']s value type shall be convertible to
[`Predicate][=']s argument type.
[:zh_CN] [`ForwardIterator] 的值类型应当可以转换为 [`Predicate] 的实参类型。

[:en] The elements [`e] of [=range(first,last)] shall be partitioned with
respect to the expression [`pred(e)].
[:zh_CN] [=range(first,last)] 中的元素 [`e] 应当已经根据表达式 [`pred(e)] 进行了
分区。

[para:returns]
[:en] An iterator [`mid] such that [`all_of(first, mid, pred)] and
[`none_of(mid, last, pred)] are both true.
[:zh_CN] 迭代器 [`mid]，使得 [`all_of(first, mid, pred)] 和
[`none_of(mid, last, pred)] 均为真。

[para:complexity]
[:en] [$[=O](\log([`last - first]))] applications of [`pred].
[:zh_CN] [$[=O](\log([`last - first]))] 次 [`pred] 的运用。
[exit:description]
