[section#lex.ccon
    [:en] Character literals
    [:zh_CN] 字符字面量
]

[%  [:en] literal [!character]
    [:zh_CN] 字面量 [!字符～] ]

[syntax]
[rule character-literal [:zh_CN] 字符字面量 ]
    [| [~:opt encoding-prefix] [`'] c-char-sequence [`'] ]
[rule:end]

[rule:oneof encoding-prefix [:zh_CN] 编码前缀 ]
    [| [`u8  u  U  L] ]
[rule:end]

[rule c-char-sequence [:zh_CN] c-字符序列 ]
    [| c-char ]
    [| c-char-sequence c-char ]
[rule:end]

[rule c-char [:zh_CN] c-字符 ]
    [| basic-c-char ]
    [| escape-sequence ]
    [| universal-character-name ]
[rule:end]

[rule basic-c-char [:zh_CN] 基本-c-字符 ]
    [|:descriptive
        [:en] any member of the translation character set except the U+0027 APOSTROPHE,[br]
            U+005C REVERSE SOLIDUS, or new-line character
        [:zh_CN] 翻译字符集中除了 U+0027 APOSTROPHE，U+005C REVERSE SOLIDUS[br]
            或换行字符之外的任意成员
    ]
[rule:end]

[rule escape-sequence [:zh_CN] 转义序列 ]
    [| simple-escape-sequence ]
    [| numeric-escape-sequence ]
    [| conditional-escape-sequence ]
[rule:end]

[rule simple-escape-sequence [:zh_CN] 简单转义序列 ]
    [| [`\] simple-escape-sequence-char ]
[rule:end]

[rule:oneof simple-escape-sequence-char [:zh_CN] 简单转义序列字符 ]
    [| [`'  "  ?  \  a  b  f  n  r  t  v] ]
[rule:end]

[rule numeric-escape-sequence [:zh_CN] 数值转义序列 ]
    [| octal-escape-sequence ]
    [| hexadecimal-escape-sequence ]
[rule:end]

[rule octal-escape-sequence [:zh_CN] 八进制转义序列 ]
    [| [`\] octal-digit ]
    [| [`\] octal-digit octal-digit ]
    [| [`\] octal-digit octal-digit octal-digit ]
[rule:end]

[rule hexadecimal-escape-sequence [:zh_CN] 十六进制转义序列 ]
    [| [`\x] hexadecimal-digit ]
    [| hexadecimal-escape-sequence hexadecimal-digit ]
[rule:end]

[rule conditional-escape-sequence [:zh_CN] 有条件转义序列 ]
    [| [`\] conditional-escape-sequence-char ]
[rule:end]

[rule conditional-escape-sequence-char [:zh_CN] 有条件转义序列字符 ]
    [|:descriptive
        [:en] any member of the basic character set that is not an
            [~octal-digit], [~simple-escape-sequence-char], or the characters
            [`u], [`U], or [`x]
        [:zh_CN] 基本字符集中的任意成员，除了[~八进制数字]，[~简单转义序列字符]，
            或字符 [`u]、[`U] 或 [`x]
    ]
[rule:end]
[syntax:end]

[para]
[:en]
[%literal[!character]]
[%literal[![`char8_t]]]
[%literal[![`char16_t]]]
[%literal[![`char32_t]]]
[%literal[!type of character]]
[%type[![`char8_t]]]
[%type[![`char16_t]]]
[%type[![`char32_t]]]
[%wide-character]
[%type[![`wchar_t]]]
[:zh_CN]
[%字面量[!字符～]]
[%字面量[![`char8_t]]]
[%字面量[![`char16_t]]]
[%字面量[![`char32_t]]]
[%字面量[!字符～的类型]]
[%类型[![`char8_t]]]
[%类型[![`char16_t]]]
[%类型[![`char32_t]]]
[%宽字符]
[%类型[![`wchar_t]]]

[:en]
A [+non-encodable character literal[%literal[!character[!non-encodable]]]]
is a [~character-literal] whose [~c-char-sequence] consists of a single [~c-char]
that is not a [~numeric-escape-sequence] and that specifies a character that
either lacks representation in the literal[=']s associated character encoding
or that cannot be encoded as a single code unit.
[:zh_CN]
[+不可编码字符字面量[%字面量[!字符[!不可编码]]]]是由一个并非[~数值转义序列]的
单个 [~c-字符]组成其 [~c-字符序列]的[~字符字面量]，其所指定的字符，要么在该
字面量的关联字符编码中缺乏表示，要么无法编码为单个代码点。

[:en]
A [+:adj multicharacter[!literal]] is a [~character-literal] whose
[~c-char-sequence] consists of more than one [~c-char].
[:zh_CN]
[+:adj 多字符[!字面量]]是由多于一个 [~c-字符] 组成其 [~c-字符序列]的[~字符字面量]。

[:en]
The [~encoding-prefix] of a non-encodable character literal or a multicharacter
literal shall be absent or [`L].
[:zh_CN]
不可编码字符字面量或多字符字面量的[~编码前缀]应当没有或为 [`L]。

[:en]
Such [~character-literal]s are conditionally-supported.
[:zh_CN]
这种[~字符字面量]是有条件支持的。

[para]
[:en]
The kind of a [~character-literal], its type, and its associated character
encoding are determined by its [~encoding-prefix] and its [~c-char-sequence]
as defined by [#:tab#lex.ccon.literal].
[:zh_CN]
[~字符字面量]的种类，它的类型，以及它所关联的字符编码，由其[~编码前缀]和其
[~c-字符序列]决定，如 [#:tab#lex.ccon.literal] 中所定义。

[:en]
The special cases for non-encodable character literals and multicharacter
literals take precedence over their respective base kinds.
[:zh_CN]
不可编码字符字面量和多字符字面量的特殊情况，优先于它们的相应基本种类。

[begin:note]
[:en]
The associated character encoding for ordinary and wide character literals
determines encodability, but does not determine the value of non-encodable
ordinary or wide character literals or ordinary or wide multicharacter literals.
[:zh_CN]
普通和宽字符字面量的关联字符编码决定其是否可编码，但并不决定不可编码的普通或宽
字符字面量或者普通或宽多字符字面量的值。

[:en]
The examples in [#:tab#lex.ccon.literal] for non-encodable ordinary and wide
character literals assume that the specified character lacks representation in
the ordinary literal encoding or wide literal encoding, respectively, or
that encoding the character would require more than one code unit.
[:zh_CN]
[#:tab#lex.ccon.literal] 中针对不可编码的普通和宽字符字面量的示例，假定所指定的
字符分别在普通字面编码或宽字面编码中缺乏表示，或者该字符的编码需要多于一个代码点。
[end:note]

[table:grid#lex.ccon.literal
    [:en] Character literals
    [:zh_CN] 字符字面量
    [|  [:en] Encoding prefix
        [:zh_CN] 编码前缀 ]
    [|  [:en] Kind
        [:zh_CN] 种类 ]
    [|  [:en] Type
        [:zh_CN] 类型 ]
    [|  [:en] Associated character encoding
        [:zh_CN] 关联的字符编码 ]
    [|  [:en] Example
        [:zh_CN] 示例 ]
]
[|@rowspan=3]
    [:en] none [:zh_CN] 无
[|] [:en] [+ordinary character literal[%literal[!character[!ordinary]]]]
    [:zh_CN] [+普通字符字面量[%字面量[!字符[!普通]]]]
[|] [`:key char]
[|@rowspan=3]
    [:en] ordinary literal encoding
    [:zh_CN] 普通字面编码
[|] [`'v']
[-]
[|] [:en] non-encodable ordinary character literal
    [:zh_CN] 不可编码的普通字符字面量
[|] [`:key int]
[|] [`'\U0001F525']
[-]
[|] [:en] ordinary multicharacter literal
    [:zh_CN] 普通多字符字面量
[|] [`:key int]
[|] [`'abcd']
[-@sep]

[|@rowspan=3]
    [`L]
[|] [:en] [+wide character literal[%literal[!character[!wide]]]]
    [:zh_CN] [+宽字符字面量[%字面量[!字符[!宽]]]]
[|] [`:key wchar_t]
[|@rowspan=3]
    [:en] wide literal encoding
    [:zh_CN] 宽字面编码
[|] [`L'w']
[-]
[|] [:en] non-encodable wide character literal
    [:zh_CN] 不可编码的宽字符字面量
[|] [`:key wchar_t]
[|] [`L'\U0001F32A']
[-]
[|] [:en] wide multicharacter literal
    [:zh_CN] 宽多字符字面量
[|] [`:key wchar_t]
[|] [`L'abcd']
[-@sep]

[|] [`u8]
[|] [:en] [+UTF-8 character literal[%literal[!character[!UTF-8]]]]
    [:zh_CN] [+UTF-8 字符字面量[%字面量[!字符[!UTF-8]]]]
[|] [`:key char8_t]
[|] UTF-8
[|] [`u8'x']
[-@sep]

[|] [`u]
[|] [:en] [+UTF-16 character literal[%literal[!character[!UTF-16]]]]
    [:zh_CN] [+UTF-16 字符字面量[%字面量[!字符[!UTF-16]]]]
[|] [`:key char16_t]
[|] UTF-16
[|] [`u'y']
[-@sep]

[|] [`U]
[|] [:en] [+UTF-32 character literal[%literal[!character[!UTF-32]]]]
    [:zh_CN] [+UTF-32 字符字面量[%字面量[!字符[!UTF-32]]]]
[|] [`:key char32_t]
[|] UTF-32
[|] [`U'z']
[-@sep]
[table:end]

[para]
[:en]
In translation phase 4, the value of a [~character-literal] is determined using
the range of representable values of the [~character-literal][=']s type in
translation phase 7.
[:zh_CN]
在翻译阶段 4 中，[~字符字面量]的值通过使用翻译阶段 7 中该[~字符字面量]的类型的
可表示值的范围来决定。

[:en]
A non-encodable character literal or a multicharacter literal has an [?impldef
value of non-encodable character literal or multicharacter literal] value.
[:zh_CN]
不可编码字符字面量或多字符字面量具有[?impldef 不可编码字符字面量或多字符字面量的
值]值。

[:en]
The value of any other kind of [~character-literal] is determined as follows:
[:zh_CN]
其他任何种类的[~字符字面量]的值都按如下方式确定：

[list]
[item]
[:en]
A [~character-literal] with a [~c-char-sequence] consisting of a single
[~basic-c-char], [~simple-escape-sequence], or [~universal-character-name]
is the code unit value of the specified character as encoded in the literal[=']s
associated character encoding.
[:zh_CN]
具有由单个[~基本-c-字符]，[~简单转义序列]，或[~通用字符名]构成的 [~c-字符序列]的
[~字符字面量]，是所指定的字符按该字面量的关联字符编码进行编码的代码单元的值。

[begin:note]
[:en]
If the specified character lacks representation in the literal[=']s associated
character encoding or if it cannot be encoded as a single code unit,
then the literal is a non-encodable character literal.
[:zh_CN]
如果所指定的字符在字面量的关联字符编码中缺乏表示，或者如果它无法编码为单个代码
单元，则该字面量是不可编码字符字面量。
[end:note]

[item]
[:en]
A [~character-literal] with a [~c-char-sequence] consisting of a single
[~numeric-escape-sequence] that specifies an integer value [$v] has a value as
follows:
[:zh_CN]
具有由单个的指定某个整数值 [$v] 的[~数值转义序列]构成的 [~c-字符序列]的
[~字符字面量]的值如下：

[list]
[item]
[:en]
If [$v] does not exceed the range of representable values of the
[~character-literal][=']s type, then the value is [$v].
[:zh_CN]
若 [$v] 并未超出该[~字符字面量]的类型的可表示值范围，则其值为 [$v]。

[item]
[:en]
Otherwise, if the [~character-literal][=']s [~encoding-prefix] is absent or [`L],
and [$v] does not exceed the range of representable values of the corresponding
unsigned type for the underlying type of the [~character-literal][=']s type,
then the value is the unique value of the [~character-literal][=']s type [`T]
that is congruent to [$v] modulo [$2^N], where [$N] is the width of [`T].
[:zh_CN]
否则，若该[~字符字面量]的[~编码前缀]没有或为 [`L]，且 [$v] 并未超出该
[~字符字面量]的类型的底层类型的对应无符号类型的可表示值范围，则其值为该
[~字符字面量]的类型 [`T] 中等于 [$v] 对 [$2^N] 取模的唯一值，其中 [$N] 为 [`T]
的宽度。

[item]
[:en]
Otherwise, the [~character-literal] is ill-formed.
[:zh_CN]
否则，该[~字符字面量]非良构。
[list:end]

[item]
[:en]
A [~character-literal] with a [~c-char-sequence] consisting of a single
[~conditional-escape-sequence] is conditionally-supported and has an [?impldef
value of [~conditional-escape-sequence]] value.
[:zh_CN]
具有由单个[~有条件转义序列]构成的 [~c-字符序列]的[~字符字面量]是有条件支持的，
并具有[?impldef [~有条件转义序列]的值]值。
[list:end]

[para]
[:en]
[%backslash character] [%[`\] [%backslash character]]
[%escape character[%backslash character]]
The character specified by a [~simple-escape-sequence] is specified in
[#:tab#lex.ccon.esc].
[:zh_CN]
[%反斜杠字符] [%[`\] [%反斜杠字符]]
[%转义字符 [%反斜杠字符]]
[#:tab#lex.ccon.esc] 中指定了[~简单转义序列]所指定的字符。

[begin:note]
[:en]
Using an escape sequence for a question mark is supported for compatibility with
ISO C++ 2014 and ISO C.
[:zh_CN]
为提供与 ISO C++ 2014 和 ISO C 的兼容性而支持对问号使用的转义序列。
[end:note]

[table:listing@shape=?x1@fill=columns#lex.ccon.esc
    [:en] Simple escape sequences
    [:zh_CN] 简单转义序列
    [|@colspan=2
        [:en] character
        [:zh_CN] 字符 ]
    [|@code
        [:en] [~simple-escape-sequence]
        [:zh_CN] [~简单转义序列] ]
]
U+000A [|] LINE FEED (LF)       [|] [`\n] [-]
U+0009 [|] CHARACTER TABULATION [|] [`\t] [-]
U+000B [|] LINE TABULATION      [|] [`\v] [-]
U+0008 [|] BACKSPACE            [|] [`\b] [-]
U+000D [|] CARRIAGE RETURN (CR) [|] [`\r] [-]
U+000C [|] FORM FEED (FF)       [|] [`\f] [-]
U+0007 [|] BELL                 [|] [`\a] [-]
U+005C [|] REVERSE SOLIDUS      [|] [`\\] [-]
U+003F [|] QUESTION MARK        [|] [`\?] [-]
U+0027 [|] APOSTROPHE           [|] [`\'] [-]
U+0022 [|] QUOTATION MARK       [|] [`\"] [-]
[table:end]
