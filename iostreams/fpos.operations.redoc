[section#fpos.operations
    [:en] [`fpos] requirements
    [:zh_CN] [`fpos] 的规定
]

[para]
[%@library fpos]
[%@library streamoff]
[:en] Operations specified in Table [#tab:iostreams.position.requirements] are
permitted.
[:zh_CN] 允许进行表 [#tab:iostreams.position.requirements] 中指定的操作。

[:en] In that table,
[:zh_CN] 该表中，

[list]
[item]
[:en@~] [`P] refers to an instance of [`fpos],
[:zh_CN@~] [`P] 代表 [`fpos] 的实例，
[item]
[:en@~] [`p] and [`q] refer to values of type [`P],
[:zh_CN@~] [`p] 和 [`q] 代表 [`P] 类型的值，
[item]
[:en@~] [`O] refers to type [`streamoff],
[:zh_CN@~] [`O] 代表类型 [`streamoff]，
[item]
[:en@~] [`o] refers to a value of type [`streamoff],
[:zh_CN@~] [`o] 代表 [`streamoff] 类型的值，
[item]
[:en@~] [`sz] refers to a value of type [`streamsize] and
[:zh_CN@~] [`sz] 代表 [`streamsize] 类型的值，而
[item]
[:en@~] [`i] refers to a value of type [`int].
[:zh_CN@~] [`i] 代表 [`int] 类型的值。
[list:end]

[table:grid#tab:iostreams.position.requirements
    [:en] Position type requirements
    [:zh_CN] 定位类型的规定
    [|@code
        [:en] Expression
        [:zh_CN] 表达式
    ]
    [|
        [:en] Return type
        [:zh_CN] 返回类型
    ]
    [|
        [:en] Operational semantics
        [:zh_CN] 操作性语义
    ]
    [|
        [:en] Assertion/note [br] pre-/post-condition
        [:zh_CN] 断言/注解 [br] 前/后条件
    ]
]
[|] P(i)
[|]
[|]
[|] [`p == P(i)]
    [para]
    [:en] note: a destructor is assumed.
    [:zh_CN] 注：假定存在析构函数。
[-]

[|] P p(i); [br] P p = i;
[|]
[|]
[|] [para:postconditions]
    [:en] [`p == P(i)].
    [:zh_CN] [`p == P(i)]。
[-]

[|] P(o)
[|] [`fpos]
[|] [:en] converts from [`offset]
    [:zh_CN] 转换自 [`offset]
[|]
[-]

[|] O(p)
[|] [`streamoff]
[|] [:en] converts to [`offset]
    [:zh_CN] 转换为 [`offset]
[|] [`P(O(p)) == p]
[-]

[|] p == q
[|] [:en] convertible to [`bool]
    [:zh_CN] 可转换为 [`bool]
[|]
[|] [:en] [`==] is an equivalence relation
    [:zh_CN] [`==] 为等价关系
[-]

[|] p != q
[|] [:en] convertible to [`bool]
    [:zh_CN] 可转换为 [`bool]
[|] [`!(p == q)]
[|]
[-]

[|] q == p + o [br] p += o
[|] [`fpos]
[|] [:en] [`+] offset
    [:zh_CN] [`+] 偏移量
[|] [`q - o == p]
[-]

[|] q == p - o [br] p -= o
[|] [`fpos]
[|] [:en] [`-] offset
    [:zh_CN] [`-] 偏移量
[|] [`q + o == p]
[-]

[|] o == p - q
[|] [`streamoff]
[|] [:en] distance
    [:zh_CN] 距离
[|] [`q + o == p]
[-]

[|] streamsize(o)
[|] [`streamsize]
[|] [:en] converts
    [:zh_CN] 转换
[|] [`streamsize(O(sz)) == sz]
[-]

[|] O(sz)
[|] [`streamoff]
[|] [:en] converts
    [:zh_CN] 转换
[|] [`streamsize(O(sz)) == sz]
[-]
[table:end]

[para]
[enter:note]
[:en] Every implementation is required to supply overloaded operators on [`fpos]
objects to satisfy the requirements of [#fpos.operations].
[:zh_CN] 要求各个实现必须为 [`fpos] 对象提供重载运算符，以满足
[#fpos.operations] 的要求。

[:en] It is unspecified whether these operators are members of [`fpos], global
operators, or provided in some other way.
[:zh_CN] 这些运算符是 [`fpos] 的成员，是全局运算符，还是以其他形式提供，是未指明
的。
[exit:note]

[para]
[:en] Stream operations that return a value of type [`traits::pos_type] return
[`P(O(-1))] as an invalid value to signal an error.
[:zh_CN] 返回 [`traits::pos_type] 类型的值的流操作，用返回 [`P(O(-1))] 来作为
表明出现错误的无效值。

[:en] If this value is used as an argument to any [`istream], [`ostream], or
[`streambuf] member that accepts a value of type [`traits::pos_type] then the
behavior of that function is [%undefined] undefined.
[:zh_CN] 如果以这个值作为调用 [`istream]、[`ostream] 或 [`streambuf] 中接受
[`traits::pos_type] 类型的值的任何成员的实参，则该函数的行为是[%未定义]未定义的。
