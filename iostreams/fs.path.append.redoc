[section#fs.path.append
    [:en] Appends
    [:zh_CN] 追加
]

[para]
[:en] The append operations use [`operator/=] to denote their semantic effect of
appending [~preferred-separator] when needed.
[:zh_CN] 追加操作使用 [`operator/=] 来表示其语义效果，当需要时将添加一个
[~首选分隔符]。

[%@library operator/=[!path]]
[%@library path[!operator/=]]
[codeblock:declaration]
path& operator/=(const path& p);
[codeblock:end]

[enter:description]
[para:effects]
[:en]
If [`p.is_absolute() || (p.has_root_name() && p.root_name() != root_name())],
then [`operator=(p)].
[:zh_CN]
若 [`p.is_absolute() || (p.has_root_name() && p.root_name() != root_name())]，
则执行 [`operator=(p)]。

[para]
[:en] Otherwise, modifies [`*this] as if by these steps:
[:zh_CN] 否则，如同通过以下步骤来修改 [`*this]：

[list]
[item]
[:en] If [`p.has_root_directory()], then removes any root directory and relative
path from the generic format pathname.
[:zh_CN] 若 [`p.has_root_directory()]，则从通用格式路径名中删除任何根目录和相对
路径。

[:en] Otherwise, if [`!has_root_directory() && is_absolute()] is [`true] or if
[`has_filename()] is [`true], then appends [`path::preferred_separator] to the
generic format pathname.
[:zh_CN] 否则，若 [`!has_root_directory() && is_absolute()] 为 [`true] 或者
[`has_filename()] 为 [`true]，则向通用格式路径名追加
[`path::preferred_separator]。

[item]
[:en] Then appends the native format pathname of [`p], omitting any [~root-name]
from its generic format pathname, to the native format pathname.
[:zh_CN] 然后将 [`p] 的本地格式路径名，忽略其通用格式路径名中的[~根名]，追加到
本地格式路径名之后。
[list:end]

[para]
[enter:example]
[:en] Even if [`//host] is interpreted as a [~root-name], both of the paths
[`path("//host")/"foo"] and [`path("//host/")/"foo"] equal [`"//host/foo"].
[:zh_CN] 即便 [`//host] 被解释为一个[~根名]，路径 [`path("//host")/"foo"] 和
[`path("//host/")/"foo"] 都等于 [`"//host/foo"]。

[para:~]
[:en] Expression examples:
[:zh_CN] 表达式的例子：

[codeblock]
// [:en] On POSIX,
// [|:zh_CN] 在 POSIX 中，
path("foo") / "";     // [:en] yields [`"foo/"]
                      // [|:zh_CN] 产生 [`"foo/"]
path("foo") / "/bar"; // [:en] yields [`"/bar"]
                      // [|:zh_CN] 产生 [`"/bar"]
// [:en] On Windows, backslashes replace slashes in the above yields
// [|:zh_CN] 在 Windows 中，以上产生的路径中以反斜杠替换斜杠

// [:en] On Windows,
// [|:zh_CN] 在 Windows 中，
path("foo") / "c:/bar";  // [:en] yields \tcode{"c:/bar"}
                         // [|:zh_CN] 产生 [`"c:/bar"]
path("foo") / "c:";      // [:en] yields [`"c:"]
                         // [|:zh_CN] 产生 [`"c:"]
path("c:") / "";         // [:en] yields [`"c:"]
                         // [|:zh_CN] 产生 [`"c:"]
path("c:foo") / "/bar";  // [:en] yields [`"c:/bar"]
                         // [|:zh_CN] 产生 [`"c:/bar"]
path("c:foo") / "c:bar"; // [:en] yields [`"c:foo/bar"]
                         // [|:zh_CN] 产生 [`"c:foo/bar"]
[codeblock:end]
[exit:example]

[para:returns]
[:en] [`*this].
[:zh_CN] [`*this]。
[exit:description]

[%@library operator/=[!path]]
[%@library path[!operator/=]]
[%@library append[!path]]
[%@library path[!append]]
[codeblock:declaration]
template <class Source>
  path& operator/=(const Source& source);
template <class Source>
  path& append(const Source& source);
[codeblock:end]

[enter:description]
[para:effects]
[:en] Equivalent to: [`return operator/=(path(source));]
[:zh_CN] 等价于：[`return operator/=(path(source));]
[exit:description]

[%@library operator/=[!path]]
[%@library path[!operator/=]]
[%@library append[!path]]
[%@library path[!append]]
[codeblock:declaration]
template <class InputIterator>
  path& append(InputIterator first, InputIterator last);
[codeblock:end]

[enter:description]
[para:effects]
[:en] Equivalent to: [`return operator/=(path(first, last));]
[:zh_CN] 等价于：[`return operator/=(path(first, last));]
[exit:description]
